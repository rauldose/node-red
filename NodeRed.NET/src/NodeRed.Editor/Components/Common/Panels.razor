@* Syncfusion Blazor Splitter Component Wrapper *@
@* Replaces custom panels with Syncfusion Splitter *@

<SfSplitter Height="100%" Width="100%" 
             Orientation="@(Horizontal ? Syncfusion.Blazor.Layouts.Orientation.Horizontal : Syncfusion.Blazor.Layouts.Orientation.Vertical)"
             SeparatorSize="6"
             CssClass="red-ui-panels">
    <SplitterPanes>
        <SplitterPane Size="@($"{InitialRatio * 100}%")" Min="@($"{MinSize}px")">
            <ContentTemplate>
                @Panel1Content
            </ContentTemplate>
        </SplitterPane>
        <SplitterPane Size="@($"{(1 - InitialRatio) * 100}%")" Min="@($"{MinSize}px")">
            <ContentTemplate>
                @Panel2Content
            </ContentTemplate>
        </SplitterPane>
    </SplitterPanes>
    <SplitterEvents Resizing="@OnResizing" />
</SfSplitter>

@code {
    [Parameter] public RenderFragment? Panel1Content { get; set; }
    [Parameter] public RenderFragment? Panel2Content { get; set; }
    [Parameter] public bool Horizontal { get; set; } = false;
    [Parameter] public double InitialRatio { get; set; } = 0.5;
    [Parameter] public double MinSize { get; set; } = 100;
    [Parameter] public EventCallback<double> OnRatioChanged { get; set; }
    
    private async Task OnResizing(ResizingEventArgs args)
    {
        if (args.PaneSize != null && args.PaneSize.Length > 0)
        {
            // PaneSize is a double array representing percentages
            var size = args.PaneSize[0];
            var ratio = size / 100.0;
            await OnRatioChanged.InvokeAsync(ratio);
        }
    }
}

<style>
    .red-ui-panels {
        display: flex;
        width: 100%;
        height: 100%;
    }
    .red-ui-panels.vertical {
        flex-direction: column;
    }
    .red-ui-panels.horizontal {
        flex-direction: row;
    }
    .red-ui-panel {
        overflow: auto;
    }
    .red-ui-panels-separator {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: ns-resize;
    }
    .red-ui-panels.horizontal .red-ui-panels-separator {
        cursor: ew-resize;
        width: 6px;
    }
    .red-ui-panels.vertical .red-ui-panels-separator {
        height: 6px;
    }
    .separator-handle {
        background-color: #ccc;
    }
    .red-ui-panels.horizontal .separator-handle {
        width: 2px;
        height: 30px;
    }
    .red-ui-panels.vertical .separator-handle {
        width: 30px;
        height: 2px;
    }
    .red-ui-panels-separator:hover .separator-handle {
        background-color: #888;
    }
</style>
