@* Syncfusion Blazor Tooltip Component Wrapper *@
@* Replaces custom popover with Syncfusion Tooltip *@

<SfTooltip @ref="TooltipRef" 
           Content="@Content" 
           Target="@Target"
           Position="@GetPosition()"
           IsSticky="@IsSticky"
           ShowTipPointer="true"
           CssClass="red-ui-popover">
    @if (ChildContent != null)
    {
        @ChildContent
    }
</SfTooltip>

@code {
    [Parameter] public string? Content { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string Target { get; set; } = "";
    [Parameter] public string Direction { get; set; } = "bottom"; // top, bottom, left, right
    [Parameter] public bool IsSticky { get; set; } = false;
    [Parameter] public double X { get; set; }
    [Parameter] public double Y { get; set; }
    
    private SfTooltip? TooltipRef;
    
    private Position GetPosition()
    {
        return Direction.ToLower() switch
        {
            "top" => Position.TopCenter,
            "bottom" => Position.BottomCenter,
            "left" => Position.LeftCenter,
            "right" => Position.RightCenter,
            _ => Position.BottomCenter
        };
    }
    
    public async Task Show()
    {
        if (TooltipRef != null)
        {
            await TooltipRef.OpenAsync();
        }
    }
    
    public async Task Hide()
    {
        if (TooltipRef != null)
        {
            await TooltipRef.CloseAsync();
        }
    }
    
    public async Task SetPosition(double x, double y)
    {
        X = x;
        Y = y;
        StateHasChanged();
    }
}
